# .github/workflows/telegram-reminder.yml

name: Monthly YouTube Premium Reminder

on:
  schedule:
    # Reminder 1: Early Heads-Up - Har mahine ki 1 tareekh ko subah 10:30 AM IST (05:00 UTC)
    - cron: '0 5 1 * *' 
    # Reminder 2: Day Before Due - Har mahine ki 4 tareekh ko subah 10:30 AM IST (05:00 UTC)
    - cron: '0 5 4 * *'
    # Reminder 3: Due Date - Har mahine ki 5 tareekh ko subah 10:30 AM IST (05:00 UTC)
    - cron: '0 5 5 * *'
    # Reminder 4: Renewal Day - Har mahine ki 8 tareekh ko raat 10:00 PM IST (16:30 UTC)
    - cron: '30 16 8 * *'
  
  workflow_dispatch: # Manually trigger karne ke liye

jobs:
  # Job for 1st of the month: Early Heads-Up
  send_telegram_reminder_1st:
    runs-on: ubuntu-latest
    # Sirf tab chalega jab schedule 1st ko trigger ho ya manually run karein
    if: github.event.schedule == '0 5 1 * *' || github.event_name == 'workflow_dispatch'
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4

      - name: Get current month and year
        id: date
        run: |
          echo "MONTH=$(date +'%B')" >> $GITHUB_ENV
          echo "YEAR=$(date +'%Y')" >> $GITHUB_ENV

      - name: Send Early Reminder (1st of Month)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ğŸ”” *YouTube Premium: Payment Reminder* ğŸ””

            Hello Team,

            Quick heads-up! Your **â‚¹50 contribution** for YouTube Premium is due by **${{ env.MONTH }} 5, ${{ env.YEAR }}**. Renewal on **${{ env.MONTH }} 8, ${{ env.YEAR }}**.

            *Please ignore if paid. Thanks!* ğŸ™

            Current Members:
            1. Amit
            2. Alan D'Souza
            3. Mourya Baruah
            4. Abhishek Kumar
            5. Slot 5 â€“ Managed by Me
            6. Slot 6 â€“ Managed by Me

            Happy streaming! ğŸ“ºğŸ¶

      - name: Send QR Code for Payment (1st)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          photo: ./.github/workflows/QRcode.png
          message: |
            QR code for payment: ğŸ’³

  # Job for 4th of the month: Day Before Due Date
  send_telegram_reminder_4th:
    runs-on: ubuntu-latest
    # Sirf tab chalega jab schedule 4th ko trigger ho ya manually run karein
    if: github.event.schedule == '0 5 4 * *' || github.event_name == 'workflow_dispatch'
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4

      - name: Get current month and year
        id: date
        run: |
          echo "MONTH=$(date +'%B')" >> $GITHUB_ENV
          echo "YEAR=$(date +'%Y')" >> $GITHUB_ENV

      - name: Send Day Before Reminder (4th of Month)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            âš ï¸ *YouTube Premium: Payment Due TOMORROW!* âš ï¸

            Hi everyone,

            Reminder: **â‚¹50** for YouTube Premium is due **tomorrow, ${{ env.MONTH }} 5, ${{ env.YEAR }}**. Plan renews **${{ env.MONTH }} 8, ${{ env.YEAR }}**.

            Please pay soon for uninterrupted service! ğŸƒâ€â™‚ï¸
            *Ignore if already paid. Thank you!* ğŸ™

            Current Members:
            1. Amit
            2. Alan D'Souza
            3. Mourya Baruah
            4. Abhishek Kumar
            5. Slot 5 â€“ Managed by Me
            6. Slot 6 â€“ Managed by Me

      - name: Send QR Code for Payment (4th)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          photo: ./.github/workflows/QRcode.png
          message: |
            QR code for payment: ğŸ’³

  # Job for 5th of the month: DUE DATE!
  send_telegram_reminder_5th:
    runs-on: ubuntu-latest
    # Sirf tab chalega jab schedule 5th ko trigger ho ya manually run karein
    if: github.event.schedule == '0 5 5 * *' || github.event_name == 'workflow_dispatch'
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4

      - name: Get current month and year
        id: date
        run: |
          echo "MONTH=$(date +'%B')" >> $GITHUB_ENV
          echo "YEAR=$(date +'%Y')" >> $GITHUB_ENV

      - name: Send Due Date Reminder (5th of Month)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ğŸš¨ **ACTION REQUIRED: YouTube Premium Payment Due TODAY!** ğŸš¨

            Team, urgent reminder! ğŸ”¥ Today, **${{ env.MONTH }} 5, ${{ env.YEAR }}**, is the *final day* for your **â‚¹50 contribution** for YouTube Premium. Plan renews **${{ env.MONTH }} 8, ${{ env.YEAR }}**.

            Please pay *immediately* to avoid service disruption! ğŸ›‘
            *Ignore if already paid. Thank you for your promptness!* ğŸ™

            Current Members:
            1. Amit
            2. Alan D'Souza
            3. Mourya Baruah
            4. Abhishek Kumar
            5. Slot 5 â€“ Managed by Me
            6. Slot 6 â€“ Managed by Me

      - name: Send QR Code for Payment (5th)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          photo: ./.github/workflows/QRcode.png
          message: |
            QR code for immediate payment: ğŸ’³

  # Job for 8th of the month: Renewal Day (Night)
  send_telegram_reminder_8th:
    runs-on: ubuntu-latest
    # Sirf tab chalega jab schedule 8th ko trigger ho ya manually run karein
    if: github.event.schedule == '30 16 8 * *' || github.event_name == 'workflow_dispatch'
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4

      - name: Get current month and year
        id: date
        run: |
          echo "MONTH=$(date +'%B')" >> $GITHUB_ENV
          echo "YEAR=$(date +'%Y')" >> $GITHUB_ENV

      - name: Send Renewal Confirmation (8th of Month)
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            ğŸ‰ **YouTube Premium: Renewal Successful!** ğŸ‰

            Dear Team,

            Great news! Your YouTube Premium family plan has been **successfully renewed** for **${{ env.MONTH }}, ${{ env.YEAR }}**! âœ¨

            Enjoy: âœ… Ad-free videos ğŸš« âœ… Background play ğŸ§ âœ… YouTube Music Premium ğŸ¶

            *Just a quick note: Please ensure your â‚¹50 contribution for this month has been completed. If not, kindly do so at your earliest convenience.* ğŸ™

            Current Members:
            1. Amit
            2. Alan D'Souza
            3. Mourya Baruah
            4. Abhishek Kumar
            5. Slot 5 â€“ Managed by Me
            6. Slot 6 â€“ Managed by Me

            Thanks for your contributions! Enjoy! ğŸ¥³

